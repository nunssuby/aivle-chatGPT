import os
import openai
from PIL import Image
import streamlit as st
openai.api_key = "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"

st.set_page_config(
    page_title="DALL-E 2",
    page_icon="âœ¨",
    layout="centered",
    initial_sidebar_state="auto",
)

@st.cache(persist=True,allow_output_mutation=True,show_spinner=False,suppress_st_warning=True)
def openai_image(prompt):
    response = openai.Image.create(
      prompt=prompt,
      n=1,
      size="256x256"
    )
    image_url = response['data'][0]['url']
    return image_url

main_image = Image.open('static/main_banner.png')

st.image(main_image,use_column_width='auto')
st.title("ğŸ“„ DALL-E 2 ğŸœ Streamlit")

input_text = st.text_area("Please enter text here... ğŸ™‹",height=50)
image_button = st.button("ì´ë¯¸ì§€ ìƒì„± ğŸš€")

if image_button and input_text.strip() != "":
    with st.spinner("Loading...ğŸ’«"):
            image_url = openai_image(input_text)
            st.image(image_url, caption='Generated by OpenAI')
else:
    st.warning("Please enter something! âš ")